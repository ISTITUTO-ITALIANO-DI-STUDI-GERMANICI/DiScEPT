{"ast":null,"code":"import _classPrivateFieldLooseBase from\"/home/runner/work/DiScEPT/DiScEPT/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";import _classPrivateFieldLooseKey from\"/home/runner/work/DiScEPT/DiScEPT/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";const TEI_NS=\"http://www.tei-c.org/ns/1.0\";const TEITitle=dom=>dom.evaluate(\"/tei:TEI/tei:teiHeader//tei:title\",dom,prefix=>prefix===\"tei\"?TEI_NS:null,XPathResult.ANY_TYPE,null);const TEIPubStatement=dom=>dom.evaluate(\"/tei:TEI/tei:teiHeader//tei:publicationStmt/tei:p\",dom,prefix=>prefix===\"tei\"?TEI_NS:null,XPathResult.ANY_TYPE,null);const helpers=[// Template\n{setter:(dom,data)=>{},getter:(dom,data)=>{}},// Title\n{setter:(dom,data)=>{if(data.project.title){TEITitle(dom).iterateNext().textContent=data.project.title;}},getter:(dom,data)=>{const elm=TEITitle(dom).iterateNext();if(elm){const project=data.project||{};project.title=elm.textContent;data.project=project;}}},// Publication statements\n{setter:(dom,data)=>{if(data.project.pubStatement){TEIPubStatement().iterateNext().textContent=data.project.pubStatement;}},getter:(dom,data)=>{const elm=TEIPubStatement(dom).iterateNext();if(elm){const project=data.project||{};project.pubStatement=elm.textContent;data.project=project;}}},// Documents and languages\n{getter:(dom,data)=>Array.from(dom.firstChild.children).filter(a=>a.tagName===\"TEI\").map(a=>({language:\"TODO\",document:a.outerHTML})).forEach(a=>data.addDocumentPerLanguage(a.language,a.document)),setter:(dom,data)=>{const result=dom.evaluate(\"/tei:TEI\",dom,prefix=>prefix===\"tei\"?TEI_NS:null,XPathResult.ANY_TYPE,null);const elm=result.iterateNext();data.getDocumentLanguages().map(language=>data.getDocumentPerLanguage(language)).forEach(doc=>{const parser=new DOMParser();const domDoc=parser.parseFromString(doc,\"text/xml\");if(!domDoc.firstChild||// What about TEICorpus? TODO\ndomDoc.firstChild.tagName!==\"TEI\"||domDoc.firstChild.namespaceURI!==TEI_NS){return;}elm.append(domDoc.firstChild);});}},// Images\n{getter:(dom,data)=>{},setter:(dom,data)=>{const result=dom.evaluate(\"/tei:TEI/tei:facsimile\",dom,prefix=>prefix===\"tei\"?TEI_NS:null,XPathResult.ANY_TYPE,null);data.getDocumentLanguages().map(language=>data.getImages(language)).map(images=>images||[]).flat().forEach(image=>{if(!image.url||!image.type)return;if(image.type===\"URL\"){const graphic=dom.createElementNS(TEI_NS,\"graphic\");graphic.setAttribute(\"id\",image.id);graphic.setAttribute(\"url\",image.url);result.iterateNext().append(graphic);}// TODO: what about IIIF?!?\n});}}];var _changed=/*#__PURE__*/_classPrivateFieldLooseKey(\"changed\");var _project=/*#__PURE__*/_classPrivateFieldLooseKey(\"project\");var _documents=/*#__PURE__*/_classPrivateFieldLooseKey(\"documents\");var _alignments=/*#__PURE__*/_classPrivateFieldLooseKey(\"alignments\");var _getAlignments=/*#__PURE__*/_classPrivateFieldLooseKey(\"getAlignments\");class Data{constructor(){Object.defineProperty(this,_getAlignments,{value:_getAlignments2});Object.defineProperty(this,_changed,{writable:true,value:false});Object.defineProperty(this,_project,{writable:true,value:{}});Object.defineProperty(this,_documents,{writable:true,value:{}});Object.defineProperty(this,_alignments,{writable:true,value:[]});}get project(){return _classPrivateFieldLooseBase(this,_project)[_project];}set project(data){_classPrivateFieldLooseBase(this,_changed)[_changed]=true;_classPrivateFieldLooseBase(this,_project)[_project]=data;}get isChanged(){return _classPrivateFieldLooseBase(this,_changed)[_changed];}getDocumentLanguages(){return Object.keys(_classPrivateFieldLooseBase(this,_documents)[_documents]);}getDocumentPerLanguage(language){if(!_classPrivateFieldLooseBase(this,_documents)[_documents][language]){return\"\";}return _classPrivateFieldLooseBase(this,_documents)[_documents][language].document||\"\";}addDocumentPerLanguage(language,body){if(!_classPrivateFieldLooseBase(this,_documents)[_documents][language]){_classPrivateFieldLooseBase(this,_documents)[_documents][language]={};}_classPrivateFieldLooseBase(this,_documents)[_documents][language].document=body;_classPrivateFieldLooseBase(this,_changed)[_changed]=true;}async addFileDocumentPerLanguage(language,file){this.addDocumentPerLanguage(language,await file.text());}deleteDocumentPerLanguage(deletingLanguage){delete _classPrivateFieldLooseBase(this,_documents)[_documents][deletingLanguage];_classPrivateFieldLooseBase(this,_changed)[_changed]=true;}updateDocumentPerLanguage(language,value){_classPrivateFieldLooseBase(this,_documents)[_documents][language].document=value;_classPrivateFieldLooseBase(this,_changed)[_changed]=true;}getAlignments(langA,langB){const a=_classPrivateFieldLooseBase(this,_getAlignments)[_getAlignments](langA,langB);if(!a)return[];if(!a.swap)return a.aligments;return a.aligments.map(obj=>({a:obj.b,b:obj.a}));}deleteAlignment(langA,langB,index){const a=_classPrivateFieldLooseBase(this,_getAlignments)[_getAlignments](langA,langB);if(!a){return;}a.aligments.splice(index,1);_classPrivateFieldLooseBase(this,_changed)[_changed]=true;}addAlignment(langA,langB,idsA,idsB){const a=_classPrivateFieldLooseBase(this,_getAlignments)[_getAlignments](langA,langB);if(!a){_classPrivateFieldLooseBase(this,_alignments)[_alignments].push({langA,langB,aligments:[{a:idsA,b:idsB}]});return;}_classPrivateFieldLooseBase(this,_changed)[_changed]=false;if(!a.swap){a.aligments.push({a:idsA,b:idsB});return;}a.aligments.push({a:idsB,b:idsA});}getImages(language){if(!_classPrivateFieldLooseBase(this,_documents)[_documents][language]){return[];}return _classPrivateFieldLooseBase(this,_documents)[_documents][language].images||[];}addImage(language,id,ids,url,type){if(!_classPrivateFieldLooseBase(this,_documents)[_documents][language].images){_classPrivateFieldLooseBase(this,_documents)[_documents][language].images=[];}_classPrivateFieldLooseBase(this,_documents)[_documents][language].images.push({id,ids,url,type});}deleteImage(language,index){if(_classPrivateFieldLooseBase(this,_documents)[_documents][language]&&_classPrivateFieldLooseBase(this,_documents)[_documents][language].images){_classPrivateFieldLooseBase(this,_documents)[_documents][language].images.splice(index,1);}}async readFromFile(file){const parser=new DOMParser();const dom=parser.parseFromString(await file.text(),\"text/xml\");if(!dom.firstChild||// What about TEICorpus? TODO\ndom.firstChild.tagName!==\"TEI\"||dom.firstChild.namespaceURI!==TEI_NS){throw new Error(Data.ERR_INVALID_TYPE);}// TEI/text is not our model.\nif(Array.from(dom.firstChild.children).find(a=>a.tagName===\"text\")){throw new Error(Data.ERR_NO_DISCEPT);}_classPrivateFieldLooseBase(this,_documents)[_documents]={};for(const helper of helpers){helper.getter(dom,this);}// TODO: extract the project details\n// TODO: extract the images\n// TODO: extract the alignents\n_classPrivateFieldLooseBase(this,_changed)[_changed]=false;}generateTEI(){const parser=new DOMParser();const dom=parser.parseFromString(\"<TEI version=\\\"3.3.0\\\" xmlns=\\\"\".concat(TEI_NS,\"\\\">\\n <teiHeader>\\n  <fileDesc>\\n   <titleStmt>\\n    <title></title>\\n   </titleStmt>\\n   <publicationStmt><p></p></publicationStmt>\\n  </fileDesc>\\n </teiHeader>\\n <facsimile></facsimile>\\n</TEI>\"),\"text/xml\");for(const helper of helpers){helper.setter(dom,this);}// TODO: authors\n// TODO: resp\n// TODO: aligments\n// TODO: groups for images\nconst s=new XMLSerializer();return s.serializeToString(dom);}}function _getAlignments2(langA,langB){let a=_classPrivateFieldLooseBase(this,_alignments)[_alignments].find(a=>a.langA===langA&&a.langB===langB);if(a){return{aligments:a.aligments,swap:false};}a=_classPrivateFieldLooseBase(this,_alignments)[_alignments].find(a=>a.langA===langB&&a.langB===langA);if(a){return{aligments:a.aligments,swap:true};}return null;}Data.ERR_INVALID_TYPE=\"invalid\";Data.ERR_NO_DISCEPT=\"no-discept\";const i=new Data();export default i;","map":{"version":3,"names":["TEI_NS","TEITitle","dom","evaluate","prefix","XPathResult","ANY_TYPE","TEIPubStatement","helpers","setter","data","getter","project","title","iterateNext","textContent","elm","pubStatement","Array","from","firstChild","children","filter","a","tagName","map","language","document","outerHTML","forEach","addDocumentPerLanguage","result","getDocumentLanguages","getDocumentPerLanguage","doc","parser","DOMParser","domDoc","parseFromString","namespaceURI","append","getImages","images","flat","image","url","type","graphic","createElementNS","setAttribute","id","_changed","_classPrivateFieldLooseKey","_project","_documents","_alignments","_getAlignments","Data","constructor","Object","defineProperty","value","_getAlignments2","writable","_classPrivateFieldLooseBase","isChanged","keys","body","addFileDocumentPerLanguage","file","text","deleteDocumentPerLanguage","deletingLanguage","updateDocumentPerLanguage","getAlignments","langA","langB","swap","aligments","obj","b","deleteAlignment","index","splice","addAlignment","idsA","idsB","push","addImage","ids","deleteImage","readFromFile","Error","ERR_INVALID_TYPE","find","ERR_NO_DISCEPT","helper","generateTEI","concat","s","XMLSerializer","serializeToString","i"],"sources":["/home/runner/work/DiScEPT/DiScEPT/src/Data.js"],"sourcesContent":["const TEI_NS = \"http://www.tei-c.org/ns/1.0\";\n\nconst TEITitle = (dom) =>\n  dom.evaluate(\n    \"/tei:TEI/tei:teiHeader//tei:title\",\n    dom,\n    (prefix) => (prefix === \"tei\" ? TEI_NS : null),\n    XPathResult.ANY_TYPE,\n    null,\n  );\n\nconst TEIPubStatement = (dom) =>\n  dom.evaluate(\n    \"/tei:TEI/tei:teiHeader//tei:publicationStmt/tei:p\",\n    dom,\n    (prefix) => (prefix === \"tei\" ? TEI_NS : null),\n    XPathResult.ANY_TYPE,\n    null,\n  );\n\nconst helpers = [\n  // Template\n  { setter: (dom, data) => {}, getter: (dom, data) => {} },\n\n  // Title\n  {\n    setter: (dom, data) => {\n      if (data.project.title) {\n        TEITitle(dom).iterateNext().textContent = data.project.title;\n      }\n    },\n    getter: (dom, data) => {\n      const elm = TEITitle(dom).iterateNext();\n\n      if (elm) {\n        const project = data.project || {};\n        project.title = elm.textContent;\n        data.project = project;\n      }\n    },\n  },\n\n  // Publication statements\n  {\n    setter: (dom, data) => {\n      if (data.project.pubStatement) {\n        TEIPubStatement().iterateNext().textContent = data.project.pubStatement;\n      }\n    },\n    getter: (dom, data) => {\n      const elm = TEIPubStatement(dom).iterateNext();\n\n      if (elm) {\n        const project = data.project || {};\n        project.pubStatement = elm.textContent;\n        data.project = project;\n      }\n    },\n  },\n\n  // Documents and languages\n  {\n    getter: (dom, data) =>\n      Array.from(dom.firstChild.children)\n        .filter((a) => a.tagName === \"TEI\")\n        .map((a) => ({ language: \"TODO\", document: a.outerHTML }))\n        .forEach((a) => data.addDocumentPerLanguage(a.language, a.document)),\n    setter: (dom, data) => {\n      const result = dom.evaluate(\n        \"/tei:TEI\",\n        dom,\n        (prefix) => (prefix === \"tei\" ? TEI_NS : null),\n        XPathResult.ANY_TYPE,\n        null,\n      );\n      const elm = result.iterateNext();\n\n      data\n        .getDocumentLanguages()\n        .map((language) => data.getDocumentPerLanguage(language))\n        .forEach((doc) => {\n          const parser = new DOMParser();\n          const domDoc = parser.parseFromString(doc, \"text/xml\");\n\n          if (\n            !domDoc.firstChild ||\n            // What about TEICorpus? TODO\n            domDoc.firstChild.tagName !== \"TEI\" ||\n            domDoc.firstChild.namespaceURI !== TEI_NS\n          ) {\n            return;\n          }\n\n          elm.append(domDoc.firstChild);\n        });\n    },\n  },\n\n  // Images\n  {\n    getter: (dom, data) => {},\n    setter: (dom, data) => {\n      const result = dom.evaluate(\n        \"/tei:TEI/tei:facsimile\",\n        dom,\n        (prefix) => (prefix === \"tei\" ? TEI_NS : null),\n        XPathResult.ANY_TYPE,\n        null,\n      );\n      data\n        .getDocumentLanguages()\n        .map((language) => data.getImages(language))\n        .map((images) => images || [])\n        .flat()\n        .forEach((image) => {\n          if (!image.url || !image.type) return;\n\n          if (image.type === \"URL\") {\n            const graphic = dom.createElementNS(TEI_NS, \"graphic\");\n            graphic.setAttribute(\"id\", image.id);\n            graphic.setAttribute(\"url\", image.url);\n            result.iterateNext().append(graphic);\n          }\n\n          // TODO: what about IIIF?!?\n        });\n    },\n  },\n];\n\nclass Data {\n  #changed = false;\n  #project = {};\n  #documents = {};\n  #alignments = [];\n\n  static ERR_INVALID_TYPE = \"invalid\";\n  static ERR_NO_DISCEPT = \"no-discept\";\n\n  get project() {\n    return this.#project;\n  }\n\n  set project(data) {\n    this.#changed = true;\n    this.#project = data;\n  }\n\n  get isChanged() {\n    return this.#changed;\n  }\n\n  getDocumentLanguages() {\n    return Object.keys(this.#documents);\n  }\n\n  getDocumentPerLanguage(language) {\n    if (!this.#documents[language]) {\n      return \"\";\n    }\n\n    return this.#documents[language].document || \"\";\n  }\n\n  addDocumentPerLanguage(language, body) {\n    if (!this.#documents[language]) {\n      this.#documents[language] = {};\n    }\n\n    this.#documents[language].document = body;\n    this.#changed = true;\n  }\n\n  async addFileDocumentPerLanguage(language, file) {\n    this.addDocumentPerLanguage(language, await file.text());\n  }\n\n  deleteDocumentPerLanguage(deletingLanguage) {\n    delete this.#documents[deletingLanguage];\n    this.#changed = true;\n  }\n\n  updateDocumentPerLanguage(language, value) {\n    this.#documents[language].document = value;\n    this.#changed = true;\n  }\n\n  #getAlignments(langA, langB) {\n    let a = this.#alignments.find(\n      (a) => a.langA === langA && a.langB === langB,\n    );\n    if (a) {\n      return { aligments: a.aligments, swap: false };\n    }\n\n    a = this.#alignments.find((a) => a.langA === langB && a.langB === langA);\n    if (a) {\n      return { aligments: a.aligments, swap: true };\n    }\n\n    return null;\n  }\n\n  getAlignments(langA, langB) {\n    const a = this.#getAlignments(langA, langB);\n    if (!a) return [];\n\n    if (!a.swap) return a.aligments;\n\n    return a.aligments.map((obj) => ({ a: obj.b, b: obj.a }));\n  }\n\n  deleteAlignment(langA, langB, index) {\n    const a = this.#getAlignments(langA, langB);\n    if (!a) {\n      return;\n    }\n\n    a.aligments.splice(index, 1);\n    this.#changed = true;\n  }\n\n  addAlignment(langA, langB, idsA, idsB) {\n    const a = this.#getAlignments(langA, langB);\n    if (!a) {\n      this.#alignments.push({\n        langA,\n        langB,\n        aligments: [{ a: idsA, b: idsB }],\n      });\n      return;\n    }\n\n    this.#changed = false;\n\n    if (!a.swap) {\n      a.aligments.push({ a: idsA, b: idsB });\n      return;\n    }\n\n    a.aligments.push({ a: idsB, b: idsA });\n  }\n\n  getImages(language) {\n    if (!this.#documents[language]) {\n      return [];\n    }\n\n    return this.#documents[language].images || [];\n  }\n\n  addImage(language, id, ids, url, type) {\n    if (!this.#documents[language].images) {\n      this.#documents[language].images = [];\n    }\n\n    this.#documents[language].images.push({ id, ids, url, type });\n  }\n\n  deleteImage(language, index) {\n    if (this.#documents[language] && this.#documents[language].images) {\n      this.#documents[language].images.splice(index, 1);\n    }\n  }\n\n  async readFromFile(file) {\n    const parser = new DOMParser();\n    const dom = parser.parseFromString(await file.text(), \"text/xml\");\n\n    if (\n      !dom.firstChild ||\n      // What about TEICorpus? TODO\n      dom.firstChild.tagName !== \"TEI\" ||\n      dom.firstChild.namespaceURI !== TEI_NS\n    ) {\n      throw new Error(Data.ERR_INVALID_TYPE);\n    }\n\n    // TEI/text is not our model.\n    if (Array.from(dom.firstChild.children).find((a) => a.tagName === \"text\")) {\n      throw new Error(Data.ERR_NO_DISCEPT);\n    }\n\n    this.#documents = {};\n\n    for (const helper of helpers) {\n      helper.getter(dom, this);\n    }\n\n    // TODO: extract the project details\n    // TODO: extract the images\n    // TODO: extract the alignents\n\n    this.#changed = false;\n  }\n\n  generateTEI() {\n    const parser = new DOMParser();\n    const dom = parser.parseFromString(\n      `<TEI version=\"3.3.0\" xmlns=\"${TEI_NS}\">\n <teiHeader>\n  <fileDesc>\n   <titleStmt>\n    <title></title>\n   </titleStmt>\n   <publicationStmt><p></p></publicationStmt>\n  </fileDesc>\n </teiHeader>\n <facsimile></facsimile>\n</TEI>`,\n      \"text/xml\",\n    );\n\n    for (const helper of helpers) {\n      helper.setter(dom, this);\n    }\n\n    // TODO: authors\n    // TODO: resp\n    // TODO: aligments\n    // TODO: groups for images\n\n    const s = new XMLSerializer();\n    return s.serializeToString(dom);\n  }\n}\n\nconst i = new Data();\nexport default i;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}